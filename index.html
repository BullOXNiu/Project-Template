<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" >
		<title>Startup 4.2 - Syria</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" href="i/favicon.png" type="image/x-icon">
		<!-- Google Fonts -->
		<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@100;200;300;400;500;600;700;800;900&family=DM+Sans:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
		<!-- Bootstrap 4.5.2 CSS -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
		<!-- Slick 1.8.1 jQuery plugin CSS (Sliders) -->
		<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
		<!-- Fancybox 3 jQuery plugin CSS (Open images and video in popup) -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
		<!-- AOS 2.3.4 jQuery plugin CSS (Animations) -->
		<link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
		<!-- FontAwesome CSS -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
		<!-- Startup CSS (Styles for all blocks) - Remove ".min" if you would edit a css code -->
		<link href="css/style.min.css" rel="stylesheet" />
		<!-- jQuery 3.5.1 -->
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<!-- Load Vega Lite -->
		<script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
		<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
		<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>
		<style media="screen">
		  /* Add space between Vega-Embed links  */
		  .vega-actions a {
			margin-right: 5px;
		  }
		</style>

		<style>
			#map3 {
				margin-top: 50px;
			}

			#play-button {
			/* position: relative; */
			display: block;
			top: 140px;
			left: 50px;
			/* margin: 10px; */
			margin-left: 48%;
			margin-bottom: 5px;
			background: #f08080;
			/* padding-right: 26px; */
			border-radius: 3px;
			border: none;
			color: white;
			padding: 0 12px;
			width: 60px;
			cursor: pointer;
			height: 30px;
			}

			#play-button:hover {
			background-color: #696969;
			}    

			.ticks {
			font-size: 10px;
			}

			.track,
			.track-inset,
			.track-overlay {
			stroke-linecap: round;
			}

			.track {
			stroke: #000;
			stroke-opacity: 0.3;
			stroke-width: 10px;
			}

			.track-inset {
			stroke: #dcdcdc;
			stroke-width: 8px;
			}

			.track-overlay {
			pointer-events: stroke;
			stroke-width: 50px;
			stroke: transparent;
			cursor: crosshair;
			}

			.handle {
			fill: #fff;
			stroke: #000;
			stroke-opacity: 0.5;
			stroke-width: 1.25px;
			}

			#map3 {
				margin-top: 50px;
			}

		</style>
		<!-- Mi JavaScript -->
		<script defer src="./js/graphscript.js" delay></script>
		<script defer src="./js/deaths.js" delay></script>
		<!-- Load Javascript files -->
		<script defer src="https://cdnjs.cloudflare.com/ajax/libs/d3/6.1.1/d3.min.js"></script>
		<script defer src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js"></script>
		<script src="https://unpkg.com/topojson@3"></script>

		<script src="https://d3js.org/d3.v4.js"></script>
		<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

		<!-- Milligram CSS
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css"> -->
	</head> 
	<body>
<!-- Navigation Mobile type 1
	<a href="#" class="open_menu bg-light radius_full">
		<i class="fas fa-bars lh-40">
		</i>
	</a>
	<div class="navigation_mobile bg-dark type1">
		<a href="#" class="close_menu color-white">
			<i class="fas fa-times">
			</i>
		</a>
		<div class="px-40 pt-60 pb-60 inner">
			<div class="logo color-white mb-30">
				Startup
			</div>
			<div>
				<a href="#" class="f-heading f-22 link color-white mb-20">
					Home
				</a>
			</div>
			<div>
				<a href="#" class="f-heading f-22 link color-white mb-20">
					Tour
				</a>
			</div>
			<div>
				<a href="#" class="f-heading f-22 link color-white mb-20">
					Mobile Apps
				</a>
			</div>
			<div>
				<a href="#" class="f-heading f-22 link color-white mb-20">
					Pricing
				</a>
			</div>
			<div>
				<a href="#" class="f-heading f-22 link color-white mb-20">
					Development
				</a>
			</div>
			<div>
				<a href="#" class="link color-white op-3 mb-15">
					Help
				</a>
			</div>
			<div>
				<a href="#" class="link color-white op-3 mb-15">
					F.A.Q.
				</a>
			</div>
			<div>
				<a href="#" class="link color-white op-3 mb-15">
					Support
				</a>
			</div>
			<div>
				<a href="#" class="link color-white op-3 mb-15">
					About Us
				</a>
			</div>
			<div>
				<a href="#" class="link color-white op-3 mb-15">
					Blog
				</a>
			</div>
			<div>
				<a href="#" class="link color-white op-3 mb-15">
					Careers
				</a>
			</div>
			<div class="socials mt-40">
				<a href="#" target="_blank" class="link color-white f-18 mr-20">
					<i class="fab fa-twitter">
					</i>
				</a>
				<a href="#" target="_blank" class="link color-white f-18 mr-20">
					<i class="fab fa-facebook">
					</i>
				</a>
				<a href="#" target="_blank" class="link color-white f-18 mr-20">
					<i class="fab fa-google-plus-g">
					</i>
				</a>
			</div>
			<div class="mt-50 f-14 light color-white op-3 copy">
				Â© 2020 Designmodo. All rights reserved.
			</div>
		</div>
	</div> -->
	<!-- Header 13 -->
		<header class="pt-190 pb-130 bg-dark header_13 color-filter-dark-4" data-bg-src="uploads/syrianrefugees.jpg" data-bg-src-2x="uploads/syrianrefugees.jpg">
			<nav class="header_menu_13 pt-30 pb-30 mt-25">
				<div class="container px-xl-0">
					<div class="row justify-content-center">
						<div class="col-xl-10" data-aos="zoom-in" data-aos-delay="500">
							<div class="row justify-content-between align-items-center">
								<div class="col-xl-2 color-white logo" data-aos="zoom-in" data-aos-delay="0">
									<span>
										CSCI 3311
									</span>
								</div>
								<div class="col-xl-8 text-center f-18 medium">
									
									<a href="#AboutInfo" class="link color-white mx-15">
										World Refugee Background
									</a>
									<!-- <a href="#RefugeeInfo" class="link color-white mx-15">
										World Refugee Data
									</a> -->
									<a href="#SyrianWar" class="link color-white mx-15">
										Syrian Civil War
									</a>
									<a href="#SyrianRefugee" class="link color-white mx-15">
										Syrian Refugees
									</a>
									
								</div>
								<div class="col-xl-2 text-right">
									<a href="info.html" target='_blank' class="btn sm action-2 f-16">
										Project Info
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</nav>
			<div class="container px-xl-0 text-center color-white">
				<div class="mb-3 logo d-block d-xl-none color-white logo_mobile" data-aos="zoom-in" data-aos-delay="0">
					Startup
				</div>
				<div class="row justify-content-center">
					<div class="col-lg-7" data-aos="zoom-in" data-aos-delay="0">
						<h1 class="big mb-20">
							Syrian Refugee Crisis
						</h1>
					</div>
					<div class="col-lg-6" data-aos="zoom-in" data-aos-delay="250">
						<div class="mt-30 f-22 text-adaptive">
							And the millions lives and souls affected
						</div>
					</div>
				</div>
			</div>
		</header>
		<!-- Content 17 -->
			<section id='AboutInfo' class="pt-100 pb-100 bg-dark color-filter-dark-8 content_17" data-bg-src="i/content_17_bg@2x.jpg" data-bg-src-2x="i/content_17_bg@2x.jpg">
				<div class="container px-xl-0">
					<div class="row justify-content-center">
						<div class="col-xl-10">
							<div class="row flex-md-row-reverse justify-content-md-end">
								<div class="col-lg-4 col-md-6 bg-light radius20 pt-40 pb-40 px-40 mx-15 mx-sm-0 block_tip" data-aos="zoom-in" data-aos-delay="0">
									<div class="text-center action-2 f-22 text-adaptive">
										AAAAAAAAAAAAAA
									</div>
								</div>
								<div class="col-lg-1">
								</div>
								<div class="col-lg-6 color-white mt-4 mt-lg-0">
									<h2 class="semibold f-22" data-aos="zoom-in" data-aos-delay="250">
										Backgrond Information on Refugee
									</h2>
									<div class="mt-15 medium op-7 text-adaptive f-20" data-aos="zoom-in" data-aos-delay="500">
										AAAAAAAAAAAAAA
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
			<!-- Blog 8 -->
				<section id='RefugeeInfo' class="pt-100 pb-100 bg-light blog_8">
					<div class="container px-xl-0">
						<div class="row justify-content-between align-items-center">
							<div id="line1">line chart 1</div>
							<!-- <div class="col-lg-7" data-aos="zoom-in" data-aos-delay="0">
								<img src="i/blog_8_img.jpg" alt="" class="w-full radius10" srcset="i/blog_8_img@2x.jpg 2x">
							</div> -->
							<div class="pt-35 pb-35 col-lg-5 col-xl-4">
								<a href="#" class="mb-10 link color-heading f-14 bold text-uppercase sp-20" data-aos="zoom-in" data-aos-delay="250">
								</a>
								<h3 class="mb-15" data-aos="zoom-in" data-aos-delay="250">
									World Refugee Data
								</h3>
								<div class="color-main f-22 medium text-adaptive" data-aos="zoom-in" data-aos-delay="500">
									The chart displays how the total numbers of refugees have shifted in recent years. 
								</div>
								<div class="mt-40 mb-60 color-heading f-18 text-adaptive description" data-aos="zoom-in" data-aos-delay="750">
									Syrian refugees hold the second place in the proportion of refugees around the worldThey account for more than a third of the worldâs total refugee population
								</div>
								<a href="#https://www.unhcr.org/refugee-statistics/download/?url=nfR0" class="px-25 btn border-gray color-main f-16 radius25 md" data-aos="zoom-in" data-aos-delay="1000">
									Data Source
								</a>
							</div>
						</div>
					</div>
				</section>
				<!-- Blog 4 -->
					<section id='SyrianWar' class="pt-100 pb-100 bg-light blog_4">
						<div class="container px-xl-0">
							<div class="row">
								<div class="col-12 col-md-7">
									<h3 class="mb-25" data-aos="zoom-in" data-aos-delay="0">
										Syrian Civil War
									</h3>
									<ol class="mb-80 pl-20 color-heading f-18" data-aos="zoom-in" data-aos-delay="250">
										Hello
									</ol>
									 
									<h4 class="mb-25 f-32" data-aos="zoom-in" data-aos-delay="500">
										Fallout of the War
									</h4>
									<div class="col-xl-10 px-0 color-heading f-18" data-aos="zoom-in" data-aos-delay="500">
										After the war....
									</div>
								</div>
								<div class="mt-4 mt-md-0 col-12 col-md-5">
									<div class="relative poster" data-aos="zoom-in" data-aos-delay="750">
										<img src="uploads/youtube.png" alt="" class="img-fluid radius10" srcset="uploads/youtube.png 2x">
										<a href="https://youtu.be/hnT-iF0CAZk" class="play sm red" data-fancybox="blog_4_fancybox">
											<i class="fas fa-play">
											</i>
										</a>
									</div>
									<div class="mt-30 color-main medium text-adaptive f-18" data-aos="zoom-in" data-aos-delay="1000">
										Click on the video above to learn more about the refugee situation.
									</div>
								</div>
								 
							</div>
						</div>
					</section>
					<!-- Content 7 -->
						<section class="pt-90 pb-85 bg-dark content_7">
							<div class="container px-xl-0">
								<div class="row justify-content-center text-center color-white">
									<div class="col-lg-8 col-md-10">
										<div class="semibold text-uppercase sp-20 f-28" data-aos="zoom-in" data-aos-delay="0">
											Conflicts in the Middle East
										</div>
										<div class="mt-15 f-22 text-adaptive" data-aos="zoom-in" data-aos-delay="250">
											Click on the map below that showcases the number, location as well as fatalities of the conflicts in the Middle East region over the past 5 years.
										</div>
									</div>
								</div>
							</div>
						</section>
						<!-- Content 21 -->
							<section class="pt-80 pb-60 bg-light content_21">
								<div class="container px-xl-0">
									<div class="row justify-content-center">
										
										<div class="col-xl-10 col-lg-11" data-aos="zoom-in" data-aos-delay="0">
											<a href="map.html" target="_blank">
											<img src="i/mapimg.png" alt="" class="img-fluid radius10" srcset="i/mapimg.png">
											</a>
											<div class="mt-10 f-14 semibold text-uppercase sp-20 color-heading text-center text-sm-right">
												<a href="https://acleddata.com/curated-data-files/">Data Source</a>
											</div>
										</div>
									</div>
								</div>
							</section>
							<!-- Content 8 -->
								<section class="pt-105 pb-100 bg-light content_8">
									<div class="container px-xl-0">
										<div class="row justify-content-center text-center">
											<div class="col-lg-8 col-md-10">
												<h2 class="small" data-aos="zoom-in" data-aos-delay="0">
													A Big Impactful Quote
												</h2>
											</div>
										</div>
									</div>
								</section>
								<!-- Content 21 -->
									<section class="pt-80 pb-60 bg-light content_21">
										<div class="container px-xl-0">
											<div class="row justify-content-center">
												<div id="deaths"> DEATHS</div>
												<!-- <div class="col-xl-10 col-lg-11" data-aos="zoom-in" data-aos-delay="0">
													<img src="i/content_21_img.jpg" srcset="i/content_21_img@2x.jpg 2x" alt="" class="img-fluid radius10">
													<div class="mt-10 f-14 semibold text-uppercase sp-20 color-heading text-center text-sm-right">
														Ryan Loughlin
													</div>
												</div> -->
											</div>
										</div>
									</section>
									<!-- Content 26 -->
										<section id='SyrianRefugee' class="pt-100 pb-100 bg-light content_26">
											<div class="container px-xl-0">
												<div class="row justify-content-center">
													<div class="col-xl-10 col-lg-11">
														<div class="row flex-row-reverse justify-content-between">
															<div class="col-md-7 mb-3 mb-md-0">
																<div class="relative poster" data-aos="zoom-in" data-aos-delay="250">
																	<img src="uploads/youtube2.png" alt="" class="img-fluid radius10" srcset="uploads/youtube2.png 2x">
																	<a href="https://youtu.be/12FT7cOLaZ4" class="play action-2" data-fancybox="content_26_fancybox">
																		<i class="fas fa-play">
																		</i>
																	</a>
																</div>
															</div>
															<div class="col-md-4">
																<div class="mt-15 inner" data-aos="zoom-in" data-aos-delay="0">
																	<h2 class="f-22">
																		Syrian Refugees Spreading
																	</h2>
																	<div class="mt-15 color-heading text-adaptive f-20">
																		As a result of the endless warfare, many citizens of Syria had no choice but to flee the country, initially making their way to neighbouring countries before travelling further into Europe and even across the Atlantic to the United States.
																	</div>
																	<a href="https://www.worldvision.org/refugees-news-stories/syrian-refugee-crisis-facts" class="btn mt-60 sm border-gray color-main f-16">
																		Explore More
																	</a>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</section>
										<!-- Content 21 -->
											<section class="pt-80 pb-60 bg-light content_21">
												<div class="container px-xl-0">
													<div class="row justify-content-center">
														<div id="vis">
															<button id="play-button">Play</button>
														</div>
														<div id="tooltip"></div>
														<svg id="map3" width="750" height="480"></svg>
														<!-- <div class="col-xl-10 col-lg-11" data-aos="zoom-in" data-aos-delay="0">
															<img src="i/content_21_img.jpg" srcset="i/content_21_img@2x.jpg 2x" alt="" class="img-fluid radius10">
															<div class="mt-10 f-14 semibold text-uppercase sp-20 color-heading text-center text-sm-right">
																Ryan Loughlin
															</div>
														</div> -->
													</div>
												</div>
											</section>
											<!-- Blog 14 -->
												<section class="pt-100 pb-100 bg-light blog_14">
													<div class="container px-xl-0">
														<div class="mb-60 row justify-content-between align-items-end align-items-xl-start">
															<h2 class="col-md-8 text-adaptive" data-aos="zoom-in" data-aos-delay="0">
																While millions are suffering, there seems to be no end of this crisis as numbers of refugees continues to grow.
															</h2>
															<div class="mt-40 mt-md-0 col-md-4 col-xl-3 px-xl-0 d-flex justify-content-end" data-aos="zoom-in" data-aos-delay="250">
																<h5 class="col-xl-11 px-0 f-22 lh-32 text-adaptive">
																</h5>
															</div>
														</div>
														<img src="uploads/moresyrian.jpg" alt="" class="w-full radius10" data-aos="zoom-in" data-aos-delay="500" srcset="uploads/moresyrian.jpg 2x">
														<div class="mt-40 mb-0 action-2 f-14 lh-26 bold text-uppercase sp-20" data-aos="zoom-in" data-aos-delay="750">
															<a href="https://wtxnews.com/wp-content/uploads/2018/03/Turkish-soldiers-stand-guard-syrian-refugees-wait-behind-border-fences.jpg">Image Source</a>
														</div>
													</div>
												</section>
												<!-- Footer 12 -->
													<footer class="pt-80 pb-50 bg-dark color-white text-center footer_12">
														<div class="container px-xl-0">
															<div class="lh-40 f-18 medium" data-aos="zoom-in" data-aos-delay="0">
															
															</div>
															<div class="mt-60 text-adaptive" data-aos="zoom-in" data-aos-delay="250">
																Â© 2020 CSCI3311 Team 8. All rights reserved.
															</div>
														</div>
													</footer>
		<!-- forms alerts -->
		<div class="alert alert-success alert-dismissible fixed-top alert-form-success" role="alert">
			<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			Thanks for your message!
		</div>
		<div class="alert alert-warning alert-dismissible fixed-top alert-form-check-fields" role="alert">
			<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			Please, fill in required fields.
		</div>
		<div class="alert alert-danger alert-dismissible fixed-top alert-form-error" role="alert">
			<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<div class="message">An error occurred while sending data :( Please, check if your hosting supports PHP and check how to set form data sending <a href="https://designmodo.com/startup/documentation/#form-handler" target="_blank" class="link color-transparent-white">here</a>.</div>
		</div>

		<!-- gReCaptcha popup (uncomment if you need a recaptcha integration) -->
		<!--
		<div class="bg-dark op-8 grecaptcha-overlay"></div>
		<div class="bg-light radius10 w-350 h-120 px-20 pt-20 pb-20 grecaptcha-popup">
			<div class="w-full h-full d-flex justify-content-center align-items-center">
				<div id="g-recaptcha" data-sitekey="PUT_YOUR_SITE_KEY_HERE"></div>
			</div>
		</div>
		<script src="https://www.google.com/recaptcha/api.js?render=explicit" async defer></script>
		-->
		<!-- Bootstrap 4.5.2 JS -->
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
		<!-- Fancybox 3 jQuery plugin JS (Open images and video in popup) -->
		<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
		<!-- 
			Google maps JS API 
			Don't forget to replace the key "AIzaSyDP6Ex5S03nvKZJZSvGXsEAi3X_tFkua4U" to your own! 
			Learn how to get a key: https://help.designmodo.com/article/startup-google-maps-api/ 
		-->
		<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyDP6Ex5S03nvKZJZSvGXsEAi3X_tFkua4U"></script>
		<!-- Slick 1.8.1 jQuery plugin JS (Sliders) -->
		<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
		<!-- AOS 2.3.4 jQuery plugin JS (Animations) -->
		<script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
		<!-- Maskedinput jQuery plugin JS (Masks for input fields) -->
		<script src="js/jquery.maskedinput.min.js"></script>
		<!-- Startup JS (Custom js for all blocks) -->
		<script src="js/script.js"></script>

		<script>
			// The svg
			var svg = d3.select("svg"),
				width = +svg.attr("width"),
				height = +svg.attr("height");
	  
			// Map and projection
			var path = d3.geoPath();
			var projection = d3.geoMercator()
			  .scale(550)
			  .center([33,44])
			  // .translate([width / 2, height / 2]);
	  
			// Data and color scale
			var data = d3.map();
			// var colorScale = d3.scaleSqrt()
			//   .domain([0,1000000])
			//   .range(["grey", "black"]);
			var colorScale = d3.scaleThreshold()
			  .domain([0, 10, 100, 1000, 10000, 100000, 500000, 1000000, 5000000, 10000000])
			  .range(d3.schemeBlues[9]);
	  
			// Load external data and boot
			let q= d3.queue()
			q.defer(d3.json, "https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson")
			  // .defer(d3.csv, "./data/destination.csv", function(d) { data.set(d.Code, d.Total); })
			  .defer(d3.csv, "./data/destination.csv")
			  .defer(d3.csv, "./data/raw_unemployment.csv")
			  .defer(d3.csv, "./data/circles.csv")
			  .await(ready);
	  
			current_year = 2010
	  
			function ready(error, topo, destination, unemployment, timeline) {
			  console.log("year filter is: ", current_year)
	  
			  // console.log(topo)
			  // destination = destination.filter(d=>d.Year==current_year)
			  // console.log(destination)
			  // console.log(unemployment)
			  // console.log(timeline)
	  
			  let getPop = function(d) {
				var dd = destination.filter(d=>d.Year==current_year)
				detail = dd.filter(i=>i.Code==d.id)[0];
				if (detail==null) {
				  count = 0
				} else {
				  count = detail.Total
				}
				return count;
			  }
	  
			  let mouseOver = function(d) {
				// console.log(getPop(d))
				// console.log(d)
				d3.selectAll(".Country")
				  // .transition()
				  // .duration(200)
				  .style("opacity", 0.5)
				d3.select(this)
				  // .transition()
				  // .duration(200)
				  .style("opacity", 1)
				  .style("stroke-width", "3")
				// const pos = d3.pointer(event, window);
				// console.log(pos)
				if (d.id=='SYR') {
				  tooltip = d3.select('#tooltip')
				  .style('display', 'block')
				  .style("position", "absolute")
				  .style("border", "solid")
				  .style("border-width", "2px")
				  .style("border-radius", "5px")
				  .style("padding", "5px")
				//   .style('top', pos[1]-50 + "px")
				//   .style('left', pos[0]-20 + "px")
				.style("top", "100px")
				  .style('background-color', 'white')
				  .style('color', 'black')
				  .html(`<div style='font-size:15px'> &#9733 ${d.properties.name}</div>`)
				  return
				}
				tooltip = d3.select('#tooltip')
				  .style('display', 'block')
				  .style("position", "absolute")
				  .style("border", "solid")
				  .style("border-width", "2px")
				  .style("border-radius", "5px")
				  .style("padding", "5px")
				//   .style('top', pos[1] + "px")
				//   .style('left', pos[0] + "px")
				.style("top", "100px")
				  .style('background-color', 'white')
				  .style('color', 'black')
				  .html(`<div style='font-size:15px'>Country: ${d.properties.name} <br> Number of refugee: ${getPop(d)}</div>`)
			  }
	  
			  let mouseLeave = function(d) {
				d3.selectAll(".Country")
				  .transition()
				  .duration(100)
				  .style("opacity", 1)
				d3.select(this)
				  .transition()
				  .duration(100)
				  .style("stroke-width", "1")
				d3.select('#tooltip')
				  .style('display', 'none');
			  }
	  
			  let getColor = function(d) {
				console.log("getting color...")
				if (d.id=='SYR') {
				  return 'red';
				}
				// console.log(d.id)
				// console.log(destination.filter(i=>i.Code==d.id)[0])
				var dd = destination.filter(d=>d.Year==current_year)
				detail = dd.filter(i=>i.Code==d.id)[0]
				if (detail==null){
				  total = 0;
				} else {
				  // if (detail.Code==='SYR') {
				  //   console.log("found")
				  //   return 'red';
				  // }
				  total = dd.filter(i=>i.Code==d.id)[0].Total;
				}
				return colorScale(total);
			  }
	  
			  // Draw the map
			  function drawMap(current_year){
				console.log('drawing year: ', current_year)
				var temp = svg.append("g")
				  .selectAll("path")
				  .data(topo.features)
				  .enter()
				  .append("path")
				  // draw each country
				  .attr("d", d3.geoPath().projection(projection))
				temp.merge(temp)
				  // set the color of each country
				  .attr("fill", getColor)
				  .style("stroke", "black")
				  .attr("class", function(d){
					return "Country";
				  })
				  .style("opacity", 1)
				  .on("mouseover", mouseOver )
				  .on("mouseleave", mouseLeave )
				console.log('drawn...')
			  }
	  
			  drawMap(current_year);
	  
			  /////////////////////////////////// Timeline Slider ///////////////////////////////////
			  var formatDateIntoYear = d3.timeFormat("%Y");
			  var formatDate = d3.timeFormat("%Y");
			  var parseDate = d3.timeParse("%Y");
	  
			  var startDate = new Date("2009-11-01"),
				  endDate = new Date("2019-04-01");
	  
			  var margin = {top:20, right:20, bottom:20, left:20},
				  width = 750 - margin.left - margin.right,
				  height = 100 - margin.top - margin.bottom;
	  
			  var svg2 = d3.select("#vis")
				  .append("svg")
				  .attr("width", width + margin.left + margin.right)
				  .attr("height", height + margin.top + margin.bottom);  
	  
			  ////////// slider //////////
	  
			  var moving = false;
			  var currentValue = 0;
			  var targetValue = width;
	  
			  var playButton = d3.select("#play-button");
				  
			  var x = d3.scaleTime()
				  .domain([startDate, endDate])
				  .range([0, targetValue])
				  .clamp(true);
	  
			  var slider = svg2.append("g")
				  .attr("class", "slider")
				  .attr("transform", "translate(" + margin.left + "," + height/5 + ")");
	  
			  slider.append("line")
				  .attr("class", "track")
				  .attr("x1", x.range()[0])
				  .attr("x2", x.range()[1])
				.select(function() { return this.parentNode.appendChild(this.cloneNode(true)); })
				  .attr("class", "track-inset")
				.select(function() { return this.parentNode.appendChild(this.cloneNode(true)); })
				  .attr("class", "track-overlay")
				  .call(d3.drag()
					.on("start.interrupt", function() {
					  slider.interrupt(); 
					})
					.on("start drag", function() {
					  // console.log("dragging: ", formatDate(x.invert(currentValue)));
					  // console.log("d3 event", event.x)
					//   currentValue = event.x - 277;
					currentValue = event.x - 918;
					  console.log("")
					  console.log("cursor x value: ", currentValue)
					  console.log("x.invert value: ", x.invert(currentValue))
					  update(x.invert(currentValue)); 
					  current_year = formatDate(x.invert(currentValue));
					  console.log("current_year is: ", current_year)
					  // Redraw Map
					  drawMap(current_year);
					})
				  );
	  
			  slider.insert("g", ".track-overlay")
				  .attr("class", "ticks")
				  .attr("transform", "translate(0," + 18 + ")")
				.selectAll("text")
				  .data(x.ticks(10))
				  .enter()
				  .append("text")
				  .attr("x", x)
				  .attr("y", 10)
				  .attr("text-anchor", "middle")
				  .text(function(d) { return formatDateIntoYear(d); });
	  
			  var handle = slider.insert("circle", ".track-overlay")
				  .attr("class", "handle")
				  .attr("r", 9);
	  
			  var label = slider.append("text")  
				  .attr("class", "label")
				  .attr("text-anchor", "middle")
				  .text(formatDate(startDate))
				  .attr("transform", "translate(0," + (-25) + ")")
	  
			  
			  ////////// plot //////////
	  
			  var dataset;
	  
			  var plot = svg2.append("g")
				  .attr("class", "plot")
				  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
	  
			  // d3.csv("./data/circles.csv", prepare, function(data) {
				dataset = timeline;
				// drawPlot(dataset);
				
				playButton
				  .on("click", function() {
					var button = d3.select(this);
					if (button.text() == "Pause") {
					  moving = false;
					  clearInterval(timer);
					  // timer = 0;
					  button.text("Play");
					} else {
					  moving = true;
					  timer = setInterval(step, 100);
					  button.text("Pause");
					}
					console.log("Slider moving: " + moving);
				  })
			  // })
	  
			  function prepare(d) {
				d.id = d.id;
				d.date = parseDate(d.date);
				return d;
			  }
				
			  function step() {
				update(x.invert(currentValue));
				currentValue = currentValue + (targetValue/151);
				current_year = formatDate(x.invert(currentValue));
				console.log("current_year is: ", current_year)
				// Redraw Map
				drawMap(current_year);
				if (currentValue > targetValue) {
				  moving = false;
				  currentValue = 0;
				  clearInterval(timer);
				  // timer = 0;
				  playButton.text("Play");
				  console.log("Slider moving: " + moving);
				}
			  }
	  
			  function drawPlot(data) {
				var locations = plot.selectAll(".location").data(data);
	  
				// if filtered dataset has more circles than already existing, transition new ones in
				locations.enter()
				  .append("circle")
				  .attr("class", "location")
				  .attr("cx", function(d) { return x(d.date); })
				  .attr("cy", height/2)
				  .style("fill", function(d) { return d3.hsl(d.date/1000000000, 0.8, 0.8)})
				  .style("stroke", function(d) { return d3.hsl(d.date/1000000000, 0.7, 0.7)})
				  .style("opacity", 0.5)
				  .attr("r", 8)
					.transition()
					.duration(400)
					.attr("r", 25)
					  .transition()
					  .attr("r", 8);
	  
				// if filtered dataset has less circles than already existing, remove excess
				locations.exit()
				  .remove();
			  }
	  
			  function update(h) {
				// update position and text of label according to slider scale
				handle.attr("cx", x(h));
				label
				  .attr("x", x(h))
				  .text(formatDate(h));
	  
				// filter data set and redraw plot
				// console.log("h: ", h)
				// console.log("dataset: ", dataset)
				var newData = dataset.filter(function(d) {
				  return d.date < h;
				})
				// drawPlot(newData);
			  }
			  ///////////////////////////////////////////////////////////////////////////////////////
			}
	  
		  </script>
	</body>
</html>